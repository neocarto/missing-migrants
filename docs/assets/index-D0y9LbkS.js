const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./clustering-CqVClbcb.js","./index-B2OyUy_M.js","./sum-CCBp8Gji.js","./index-BCgWHfrs.js"])))=>i.map(i=>d[i]);
import{d as r,_ as v,a as w}from"./style-CrT-f-g4.js";const l=new Map([["./style.css",w]]);r({root:document.getElementById("cell-1"),expanded:[],variables:[]},{id:1,body:(e,t,a)=>e`# Mourir aux portes de l'Europe</ins>

## Mise à jour de la carte de Migreurop

<small>Document réalisé par [Nicolas Lambert](https://neocarto.github.io/cv/) avec Observable Notebooks 2.0<br/>[CNRS](https://www.cnrs.fr/fr) / [UAR RIATE](https://riate.cnrs.fr/) - Centre pour l'analyse spatiale et la géovisualisation<br/><br/>Les cartes de sont générées automatiquement à l'aide de la bibliothèque JavaScript [**\`geoviz\`**](https://github.com/riatelab/geoviz).<br/>Deière mise à jour : <b>${t(a)}</b></small><hr/>`,inputs:["md","formatDateFR","date"],outputs:[],output:void 0,assets:l,autodisplay:!0,autoview:!1,automutable:void 0});r({root:document.getElementById("cell-3"),expanded:[],variables:[]},{id:3,body:(e,t,a,n,i)=>e`<b>Entre le 1er janvier 1993 et ${t(a)}, <ins>${n.format(",.2r")(n.sum(i.map(o=>o.nb))).replace(","," ")} personnes</ins> sont mortes en migration en tentant de rejoindre l'Europe</b>. Noyades, asphyxies, accidents, écrasements, empoisonnements, explosions sur des champs de mines, morts de faim, de soif, d’épuisement, absence de soins médicaux, violences policières, etc. autant de tragédies humaines qui auraient pu être évitées.`,inputs:["md","formatDateFR","date","d3","data"],outputs:[],output:void 0,assets:l,autodisplay:!0,autoview:!1,automutable:void 0});r({root:document.getElementById("cell-8"),expanded:[],variables:[]},{id:8,body:(e,t,a)=>{e(t.table(a))},inputs:["view","Inputs","all"],outputs:[],output:void 0,assets:l,autodisplay:!1,autoview:void 0,automutable:void 0});r({root:document.getElementById("cell-10"),expanded:[],variables:[]},{id:10,body:(e,t)=>e`Les données incluent des coordonnées géographiques, ce qui permet de créer une première carte où le nombre de morts est représenté par des cercles proportionnel.

⚠️ _Il y a **${t.length} cercles** sur la carte, ce qui peut poser des problèmes de lisibilité. Il y a beaucoup de superpositions. Beaucoup de cercles sont masqués._`,inputs:["md","all"],outputs:[],output:void 0,assets:l,autodisplay:!0,autoview:!1,automutable:void 0});r({root:document.getElementById("cell-11"),expanded:[],variables:[]},{id:11,body:(e,t)=>{e(t({k:100}))},inputs:["display","mapAll"],outputs:[],output:void 0,assets:l,autodisplay:!1,autoview:void 0,automutable:void 0});r({root:document.getElementById("cell-14"),expanded:[],variables:[]},{id:14,body:(e,t)=>({distance:e(t.select([10,20,30,40,50,100,200],{label:"Distance",value:50}))}),inputs:["view","Inputs"],outputs:["distance"],output:void 0,assets:l,autodisplay:!1,autoview:void 0,automutable:void 0});r({root:document.getElementById("cell-16"),expanded:[],variables:[]},{id:16,body:(e,t)=>({dodge:e(t.toggle({label:"Ecarter les cercles",value:!1}))}),inputs:["view","Inputs"],outputs:["dodge"],output:void 0,assets:l,autodisplay:!1,autoview:void 0,automutable:void 0});r({root:document.getElementById("cell-17"),expanded:[],variables:[]},{id:17,body:(e,t,a,n)=>{e(t({distance:a,dodge:n}))},inputs:["display","mapAgregAll","distance","dodge"],outputs:[],output:void 0,assets:l,autodisplay:!1,autoview:void 0,automutable:void 0});r({root:document.getElementById("cell-20"),expanded:[],variables:[]},{id:20,body:(e,t)=>{const a=e(t.radio([1,2,3,4,5],{label:"Nombre de cartes par ligne",value:3})),n=e(t.select(Array.from({length:34},(i,o)=>1993+o),{label:"Année de départ",value:2018,format:i=>i.toString()}));return{nb:a,start:n}},inputs:["view","Inputs"],outputs:["nb","start"],output:void 0,assets:l,autodisplay:!1,autoview:void 0,automutable:void 0});r({root:document.getElementById("cell-21"),expanded:[],variables:[]},{id:21,body:(e,t,a,n)=>{e(t(a,n))},inputs:["display","smallMultiple","nb","start"],outputs:[],output:void 0,assets:l,autodisplay:!1,autoview:void 0,automutable:void 0});r({root:document.getElementById("cell-24"),expanded:[],variables:[]},{id:24,body:(e,t)=>{const a=e(t.select(Array.from({length:34},(o,s)=>1993+s),{label:"Année",value:2025,format:o=>o.toString()})),n=e(t.radio([10,15,20,25,30,35,40,45,50],{label:"Résolution",value:30})),i=e(t.radio(["square","hex","diamond","triangle","arbitrary"],{label:"Type de carroyage",value:"square"}));return{year:a,step:n,type:i}},inputs:["view","Inputs"],outputs:["year","step","type"],output:void 0,assets:l,autodisplay:!1,autoview:void 0,automutable:void 0});r({root:document.getElementById("cell-25"),expanded:[],variables:[]},{id:25,body:(e,t,a,n,i)=>{e(t({type:a,step:n,year:i}))},inputs:["display","grid","type","step","year"],outputs:[],output:void 0,assets:l,autodisplay:!1,autoview:void 0,automutable:void 0});r({root:document.getElementById("cell-28"),expanded:[],variables:[]},{id:28,body:e=>({svg:e.create({projection:"AzimuthalEqualArea.rotate([-20,-52])",domain:[[-25,19],[42,55]],margin:20,background:"#bde1f0",responsive:!0})}),inputs:["viz"],outputs:["svg"],output:void 0,assets:l,autodisplay:!1,autoview:void 0,automutable:void 0});r({root:document.getElementById("cell-29"),expanded:[],variables:[]},{id:29,body:(e,t,a,n,i,o,s,u,d,c,f,y,h,m,b,g)=>{e.graticule({type:"graticule",id:"graticule",stroke:"white"}),e.plot({data:t,id:"countries",fill:"#E6DED4",strokeWidth:.3}),e.plot({datum:a,fill:"#E2BD93",id:"eu27",strokeWidth:.5,filter:e.effect.shadow({stdDeviation:2,fill:"black",fillOpacity:.2,dx:2,dy:2})}),e.plot({type:"proptypo",data:n,var1:"nb",var2:"type",colors:i.map(p=>p.color),k:75,tip:p=>`${p.properties.type}
 ${p.properties.nb} personne${p.properties.nb>1?"s":""}`,stroke:"white",strokeWidth:.2,leg2_rect_width:15,leg2_rect_height:15,leg2_pos:[25,215],leg2_title:"Cause de la mort",leg2_values_stroke:"#bde1f0",leg2_values_strokeWidth:14,leg2_values_dx:8,leg2_values_paintOrder:"stroke",leg2_values_strokeLinejoin:"round",leg1_pos:[20,20],leg1_values_round:0,leg1_title:"Nombre de morts",leg1_subtitle:`Du 1er janvier 1993 au ${o(s)}`,leg1_title_dy:-5}),e.path({datum:u,id:"schengen",stroke:"#383333",strokeDasharray:[5,3],strokeOpacity:.5,strokeWidth:1.4,filter:e.effect.shadow({stdDeviation:1,fill:"black",fillOpacity:.5,dx:1,dy:1})}),e.scalebar({id:"scale",units:"km",label:"Kilomètres"}),e.header({text:"Des morts par milliers aux portes de l'Europe",id:"header",background_fill:"#454545",fill:"white"}),d.forEach(p=>{e.text({id:p.id,pointerEvents:"none",coords:"geo",pos:[p.pos[1],p.pos[0]],text:p.fr,textAnchor:p.anchor,fill:p.fill||"#454545",fillOpacity:p.fillOpacity||1,fontWeight:"bold",strokeWidth:p.strokeWidth,strokeOpacity:p.strokeOpacity||.7,fontSize:p.fontSize,stroke:p.stroke||"white"})}),e.text({pos:[866,15],textAnchor:"middle",fontSize:50,fill:"#454545",fontWeight:"bold",text:`${c.format(",.2r")(c.sum(f.map(p=>p.nb))).replace(","," ")}`,id:"total"}),e.text({pos:[866,65],textAnchor:"middle",fontSize:14,fill:"#454545",stroke:"#E6DED4",strokeWidth:4,text:`C'est le nombre de personnes
migrantes mortes ou portées
disparues en essayant de
rejoindre l'Union européenne
entre ${y} et ${h}.

Dit autrement, ce sont
${m} femmes, hommes
et enfants qui perdent
la vie chaque semaine.`}),e.text({text:b,pos:[e.width-15,450],textAnchor:"end",fontSize:10,fill:"#76858C",fillOpacity:.7,fontStyle:"italic",textDominantBaseline:"hanging",id:"source"}),g(e.render())},inputs:["svg","land","eu","clusters","types","formatDateFR","date","schengen","toponymes","d3","data","yearmin","yearmax","nbbyweek","source","display"],outputs:[],output:void 0,assets:l,autodisplay:!1,autoview:void 0,automutable:void 0});r({root:document.getElementById("cell-30"),expanded:[],variables:[]},{id:30,body:(e,t,a,n,i)=>{const o=e.button("Télécharger en svg"),s=e.button("Télécharger en png"),u=document.createElement("div");return u.className="button-container",u.append(o),u.append(s),t(u),o.addEventListener("click",()=>{a.exportSVG(n.select(i.node()))}),s.addEventListener("click",()=>{a.exportPNG(n.select(i.node()))}),{button_svg:o,button_png:s,container:u}},inputs:["Inputs","display","viz","d3","svg"],outputs:["button_svg","button_png","container"],output:void 0,assets:l,autodisplay:!1,autoview:void 0,automutable:void 0});r({root:document.getElementById("cell-32"),expanded:[],variables:[]},{id:32,body:e=>e(new URL("data:application/octet-stream;base64,",import.meta.url).href).arrayBuffer(),inputs:["FileAttachment"],outputs:[],output:void 0,assets:l,autodisplay:!1,autoview:void 0,automutable:void 0});r({root:document.getElementById("cell-34"),expanded:[],variables:[]},{id:34,body:async()=>{const[{formatDateFR:e},{toGeoJSON:t},{clustering:a},{clustersDbscan:n}]=await Promise.all([v(()=>import("./formatDateFR-CpbNAjJp.js"),[],import.meta.url).then(o=>{if(!("formatDateFR"in o))throw new SyntaxError("export 'formatDateFR' not found");return o}),v(()=>import("./toGeoJSON-snGM7fOw.js"),[],import.meta.url).then(o=>{if(!("toGeoJSON"in o))throw new SyntaxError("export 'toGeoJSON' not found");return o}),v(()=>import("./clustering-CqVClbcb.js"),__vite__mapDeps([0,1,2]),import.meta.url).then(o=>{if(!("clustering"in o))throw new SyntaxError("export 'clustering' not found");return o}),v(()=>import("./index-B2OyUy_M.js"),[],import.meta.url).then(o=>{if(!("clustersDbscan"in o))throw new SyntaxError("export 'clustersDbscan' not found");return o})]),i=v(()=>import("./index-BCgWHfrs.js"),__vite__mapDeps([3,2]),import.meta.url);return{formatDateFR:e,toGeoJSON:t,clustering:a,clustersDbscan:n,viz:i}},inputs:[],outputs:["formatDateFR","toGeoJSON","clustering","clustersDbscan","viz"],output:void 0,assets:l,autodisplay:!1,autoview:void 0,automutable:void 0});r({root:document.getElementById("cell-35"),expanded:[],variables:[]},{id:35,body:()=>({yearmin:1993,yearmax:new Date().getFullYear(),lang:"fr"}),inputs:[],outputs:["yearmin","yearmax","lang"],output:void 0,assets:l,autodisplay:!1,autoview:void 0,automutable:void 0});r({root:document.getElementById("cell-36"),expanded:[],variables:[]},{id:36,body:async e=>{let t=await e(new URL(""+new URL("data-BCfKOS4Y.csv",import.meta.url).href,import.meta.url).href).csv(),a=await e(new URL(""+new URL("land-Dvzn_kmh.json",import.meta.url).href,import.meta.url).href).json(),n=await e(new URL(""+new URL("eu-Dm0wIMj8.json",import.meta.url).href,import.meta.url).href).json(),i=await e(new URL(""+new URL("schengen-gDsR65kv.json",import.meta.url).href,import.meta.url).href).json(),o=await e(new URL(""+new URL("toponymes-CVFmXlu4.json",import.meta.url).href,import.meta.url).href).json(),s=e(new URL("data:text/plain;base64,MjAyNi0wMi0xMgo=",import.meta.url).href).text();return{all:t,land:a,eu:n,schengen:i,toponymes:o,date:s}},inputs:["FileAttachment"],outputs:["all","land","eu","schengen","toponymes","date"],output:void 0,assets:l,autodisplay:!1,autoview:void 0,automutable:void 0});r({root:document.getElementById("cell-37"),expanded:[],variables:[]},{id:37,body:()=>({types:[{type:"Noyade",color:"#58ABD3"},{type:"Suicide",color:"#F8E91F"},{type:"Asphyxie",color:"#6B2265"},{type:"Mort de faim, de soif, de froid ou d'épuisement",color:"#1C7532"},{type:"Homicide, torture, absence de soin, violences policières",color:"#F49919"},{type:"Empoisonnement, Champ de mine, accident, autre",color:"#637A84"}]}),inputs:[],outputs:["types"],output:void 0,assets:l,autodisplay:!1,autoview:void 0,automutable:void 0});r({root:document.getElementById("cell-38"),expanded:[],variables:[]},{id:38,body:(e,t,a)=>({check:new Map(e.tool.project(e.tool.featurecollection(t,{lat:"lat",lon:"lng"}),{projection:a.projection}).features.map(i=>[i.properties.id,i.geometry?.coordinates]))}),inputs:["viz","all","svg"],outputs:["check"],output:void 0,assets:l,autodisplay:!1,autoview:void 0,automutable:void 0});r({root:document.getElementById("cell-39"),expanded:[],variables:[]},{id:39,body:(e,t)=>({data:e.filter(n=>Array.isArray(t.get(n.id)))}),inputs:["all","check"],outputs:["data"],output:void 0,assets:l,autodisplay:!1,autoview:void 0,automutable:void 0});r({root:document.getElementById("cell-40"),expanded:[],variables:[]},{id:40,body:(e,t,a,n)=>{let i=e.map(u=>u.type),o=[];i.forEach(u=>{let d=t.filter(c=>c.fr==u);o.push(a(n(d),20,u).features)});let s={type:"FeatureCollection",features:o.flat()};return{categories:i,features:o,clusters:s}},inputs:["types","data","clustering","toGeoJSON"],outputs:["categories","features","clusters"],output:void 0,assets:l,autodisplay:!1,autoview:void 0,automutable:void 0});r({root:document.getElementById("cell-41"),expanded:[],variables:[]},{id:41,body:(e,t,a)=>{let n=`UNITED for Intercultural
Action (1993-1999)`,i=`The "Migrants Files" project
(2000 - 2013)`,o=e=="en"?`International Organization
for Migration
(2014 to now)`:`Organisation Internationale
pour les Migrations
(2014 à aujourd'hui)`,s=e=="en"?`Map design
Nicolas Lambert, 2025`:`Cartographie
Nicolas Lambert, 2025
`;return t<2e3&&(s+=`
`+n),t<=2013&&a>=2e3&&(s+=`
`+i),a>=2014&&(s+=`
`+o),{source1:n,source2:i,source3:o,source:s}},inputs:["lang","yearmin","yearmax"],outputs:["source1","source2","source3","source"],output:void 0,assets:l,autodisplay:!1,autoview:void 0,automutable:void 0});r({root:document.getElementById("cell-42"),expanded:[],variables:[]},{id:42,body:(e,t,a,n)=>{let i=new Date(e),o=i.getTime()-new Date(`${t}-01-01`).getTime();const s=Math.round(o/(1e3*3600*24)),u=s/7,d=Math.round(a.sum(n.map(c=>c.nb))/u);return{update:i,Difference_In_Time:o,days:s,weeks:u,nbbyweek:d}},inputs:["date","yearmin","d3","data"],outputs:["update","Difference_In_Time","days","weeks","nbbyweek"],output:void 0,assets:l,autodisplay:!1,autoview:void 0,automutable:void 0});r({root:document.getElementById("cell-43"),expanded:[],variables:[]},{id:43,body:(e,t,a,n,i,o)=>{function s({year:u=2020,distance:d=300,parent:c,width:f=1e3,pos:y=[0,0],k:h=70}={}){const m=e(t.tool.featurecollection(a.filter(g=>g.year==u),{lat:"lat",lon:"lng"}),d);let b=t.create({parent:c,projection:n.geoAzimuthalEqualArea().rotate([-20,-52]),width:f,pos:y,domain:[[-25,19],[42,55]]});return b.plot({type:"outline"}),b.plot({datum:i,fill:"white"}),b.plot({data:o,stroke:"#383333",strokeDasharray:[5,3],strokeOpacity:.5,strokeWidth:1,filter:b.effect.shadow({stdDeviation:1,fill:"black",fillOpacity:.5,dx:1,dy:1})}),b.plot({type:"prop",data:m,var:"nb",k:h,fixmax:1e3,fill:"#E94849",fillOpacity:.8,tip:"$nb",legend:!1}),b.plot({type:"text",pos:[10,10],text:`${u}`,fontSize:30,fontWeight:"bold",fill:"white"}),b.plot({type:"text",pos:[10,40],text:`${n.sum(m.features.map(g=>g.properties.nb))} mort.e.s`,fontSize:12,fontWeight:"bold",fill:"#474746"}),b.render()}return{mapByYear:s}},inputs:["clustering","viz","data","d3","land","schengen"],outputs:["mapByYear"],output:void 0,assets:l,autodisplay:!1,autoview:void 0,automutable:void 0});r({root:document.getElementById("cell-44"),expanded:[],variables:[]},{id:44,body:(e,t,a)=>{function n(i=3,o=1993){const s=[...new Set(e.map(y=>+y.year))].sort().filter(y=>y>=o),u=1e3,d=u/i,c=d/1.46;let f=t.create({responsive:!0,width:u,height:Math.ceil(s.length/i)*c});return s.forEach((y,h)=>{const m=Math.floor(h/i),g=h%i*d,p=m*c;a({year:y,parent:f,width:d,k:20,pos:[g,p]})}),f.render()}return{smallMultiple:n}},inputs:["data","viz","mapByYear"],outputs:["smallMultiple"],output:void 0,assets:l,autodisplay:!1,autoview:void 0,automutable:void 0});r({root:document.getElementById("cell-45"),expanded:[],variables:[]},{id:45,body:(e,t,a,n,i,o)=>{function s({k:u=50}={}){let d=e.create({projection:t.geoAzimuthalEqualArea().rotate([-20,-52]),width:a,responsive:!0,domain:[[-25,19],[42,55]]});return d.plot({type:"outline"}),d.plot({datum:n,fill:"white"}),d.plot({data:i,stroke:"#383333",strokeDasharray:[5,3],strokeOpacity:.5,strokeWidth:1,filter:d.effect.shadow({stdDeviation:1,fill:"black",fillOpacity:.5,dx:1,dy:1})}),d.plot({type:"prop",data:o,var:"nb",k:u,fill:"#E94849",fillOpacity:.8,tip:"$nb",leg_title:`Personnes mortes
ou portées disparues
de 1993 à aujourd'hui`,leg_subtitle:"(Nombre de personnes)",leg_values_round:0}),d.render()}return{mapAll:s}},inputs:["viz","d3","width","land","schengen","clusters"],outputs:["mapAll"],output:void 0,assets:l,autodisplay:!1,autoview:void 0,automutable:void 0});r({root:document.getElementById("cell-46"),expanded:[],variables:[]},{id:46,body:(e,t,a,n,i,o)=>{function s({distance:u=50,width:d=1e3,k:c=100,fixmax:f=3e4,dodge:y=!1}={}){const h=e(t.tool.featurecollection(a,{lat:"lat",lon:"lng"}),u);let m=t.create({projection:n.geoAzimuthalEqualArea().rotate([-20,-52]),width:d,responsive:!0,domain:[[-25,19],[42,55]]});return m.plot({type:"outline"}),m.plot({datum:i,fill:"white"}),m.plot({data:o,stroke:"#383333",strokeDasharray:[5,3],strokeOpacity:.5,strokeWidth:1,filter:m.effect.shadow({stdDeviation:1,fill:"black",fillOpacity:.5,dx:1,dy:1})}),m.plot({type:"prop",data:h,var:"nb",k:c,fixmax:f,dodge:y,fill:"#E94849",fillOpacity:.8,tip:"$nb",leg_title:`Personnes mortes
ou portées disparues
de 1993 à aujourd'hui`,leg_subtitle:"(Nombre de personnes)",leg_values_round:0}),m.render()}return{mapAgregAll:s}},inputs:["clustering","viz","data","d3","land","schengen"],outputs:["mapAgregAll"],output:void 0,assets:l,autodisplay:!1,autoview:void 0,automutable:void 0});r({root:document.getElementById("cell-47"),expanded:[],variables:[]},{id:47,body:(e,t,a,n,i,o)=>{function s({type:u="square",step:d=10,year:c="2025"}={}){let f=e.create({projection:t.geoAzimuthalEqualArea().rotate([-20,-52]),width:a,responsive:!0,domain:[[-25,19],[42,55]]}),y=f.grid({type:u,step:d,data:e.tool.featurecollection(n.filter(g=>g.year==c),{lat:"lat",lon:"lng"}),var:"nb"});const h=t.max(y.features.map(g=>g.properties.nb)),m=[1,5,10,25,50,100,500,1e3,h].filter(g=>g<=h),b=["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"].slice(0,m.length-1);return f.plot({type:"outline"}),f.plot({datum:i,fill:"white"}),f.plot({type:"choro",coords:"svg",colors:b,data:y,var:"nb",tip:"$nb",fillOpacity:.8,breaks:m,leg_title:`Nombre de personnes
mortes ou portées
disparues en ${c}`}),f.plot({data:o,stroke:"#383333",strokeDasharray:[5,3],strokeOpacity:.5,strokeWidth:1,filter:f.effect.shadow({stdDeviation:1,fill:"black",fillOpacity:.5,dx:1,dy:1})}),f.render()}return{grid:s}},inputs:["viz","d3","width","all","land","schengen"],outputs:["grid"],output:void 0,assets:l,autodisplay:!1,autoview:void 0,automutable:void 0});
