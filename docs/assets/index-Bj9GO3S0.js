const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./inputs-DoHVubAa.js","./inputs-Cuu9vI3M.css","./clustering-CqVClbcb.js","./index-B2OyUy_M.js","./sum-CCBp8Gji.js","./index-BCgWHfrs.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const He="modulepreload",Xe=function(e,t){return new URL(e,t).href},ve={},m=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let u=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};const s=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");i=u(n.map(c=>{if(c=Xe(c,r),c in ve)return;ve[c]=!0;const d=c.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(r)for(let v=s.length-1;v>=0;v--){const y=s[v];if(y.href===c&&(!d||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${p}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":He,d||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((v,y)=>{f.addEventListener("load",v),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return i.then(s=>{for(const a of s||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})};class S extends Error{constructor(t,n){super(t),this.input=n}}S.prototype.name="RuntimeError";function Ke(e){return e&&typeof e.next=="function"&&typeof e.return=="function"}function re(e){return()=>e}function Y(e){return e}function Qe(e){return()=>{throw e}}const et=Array.prototype,tt=et.map;function A(){}const ae=1,V=2,U=3,M=Symbol("no-observer"),nt=Promise.resolve();function T(e,t,n,r){n||(n=M),Object.defineProperties(this,{_observer:{value:n,writable:!0},_definition:{value:ue,writable:!0},_duplicate:{value:void 0,writable:!0},_duplicates:{value:void 0,writable:!0},_indegree:{value:NaN,writable:!0},_inputs:{value:[],writable:!0},_invalidate:{value:A,writable:!0},_module:{value:t},_name:{value:null,writable:!0},_outputs:{value:new Set,writable:!0},_promise:{value:nt,writable:!0},_reachable:{value:n!==M,writable:!0},_rejector:{value:st(this)},_shadow:{value:rt(t,r)},_type:{value:e},_value:{value:void 0,writable:!0},_version:{value:0,writable:!0}})}Object.defineProperties(T.prototype,{_pending:{value:dt,writable:!0,configurable:!0},_fulfilled:{value:ft,writable:!0,configurable:!0},_rejected:{value:pt,writable:!0,configurable:!0},_resolve:{value:ut,writable:!0,configurable:!0},define:{value:at,writable:!0,configurable:!0},delete:{value:ct,writable:!0,configurable:!0},import:{value:lt,writable:!0,configurable:!0}});function rt(e,t){return t?.shadow?new Map(Object.entries(t.shadow).map(([n,r])=>[n,new T(V,e).define([],r)])):null}function ot(e){e._module._runtime._dirty.add(e),e._outputs.add(this)}function it(e){e._module._runtime._dirty.add(e),e._outputs.delete(this)}function ue(){throw ue}function P(){throw P}function st(e){return t=>{throw t===P?t:t===ue?new S(`${e._name} is not defined`,e._name):t instanceof Error&&t.message?new S(t.message,e._name):new S(`${e._name} could not be resolved`,e._name)}}function ge(e){return()=>{throw new S(`${e} is defined more than once`)}}function at(e,t,n){switch(arguments.length){case 1:{n=e,e=t=null;break}case 2:{n=t,typeof e=="string"?t=null:(t=e,e=null);break}}return le.call(this,e==null?null:String(e),t==null?[]:tt.call(t,this._resolve,this),typeof n=="function"?n:re(n))}function ut(e){return this._shadow?.get(e)??this._module._resolve(e)}function le(e,t,n){const r=this._module._scope,i=this._module._runtime;if(this._inputs.forEach(it,this),t.forEach(ot,this),this._inputs=t,this._definition=n,this._value=void 0,n===A?i._variables.delete(this):i._variables.add(this),e!==this._name||r.get(e)!==this){let o,s;if(this._name)if(this._outputs.size)r.delete(this._name),s=this._module._resolve(this._name),s._outputs=this._outputs,this._outputs=new Set,s._outputs.forEach(function(a){a._inputs[a._inputs.indexOf(this)]=s},this),s._outputs.forEach(i._updates.add,i._updates),i._dirty.add(s).add(this),r.set(this._name,s);else if((s=r.get(this._name))===this)r.delete(this._name);else if(s._type===U)s._duplicates.delete(this),this._duplicate=void 0,s._duplicates.size===1&&(s=s._duplicates.keys().next().value,o=r.get(this._name),s._outputs=o._outputs,o._outputs=new Set,s._outputs.forEach(function(a){a._inputs[a._inputs.indexOf(o)]=s}),s._definition=s._duplicate,s._duplicate=void 0,i._dirty.add(o).add(s),i._updates.add(s),r.set(this._name,s));else throw new Error;if(this._outputs.size)throw new Error;e&&((s=r.get(e))?s._type===U?(this._definition=ge(e),this._duplicate=n,s._duplicates.add(this)):s._type===V?(this._outputs=s._outputs,s._outputs=new Set,this._outputs.forEach(function(a){a._inputs[a._inputs.indexOf(s)]=this},this),i._dirty.add(s).add(this),r.set(e,this)):(s._duplicate=s._definition,this._duplicate=n,o=new T(U,this._module),o._name=e,o._definition=this._definition=s._definition=ge(e),o._outputs=s._outputs,s._outputs=new Set,o._outputs.forEach(function(a){a._inputs[a._inputs.indexOf(s)]=o}),o._duplicates=new Set([this,s]),i._dirty.add(s).add(o),i._updates.add(s).add(o),r.set(e,o)):r.set(e,this)),this._name=e}return this._version>0&&++this._version,i._updates.add(this),i._compute(),this}function lt(e,t,n){return arguments.length<3&&(n=t,t=e),le.call(this,String(t),[n._resolve(String(e))],Y)}function ct(){return le.call(this,null,[],A)}function dt(){this._observer.pending&&this._observer.pending()}function ft(e){this._observer.fulfilled&&this._observer.fulfilled(e,this._name)}function pt(e){this._observer.rejected&&this._observer.rejected(e,this._name)}const Pe=Symbol("variable"),$e=Symbol("invalidation"),Ae=Symbol("visibility");function G(e,t=[]){Object.defineProperties(this,{_runtime:{value:e},_scope:{value:new Map},_builtins:{value:new Map([["@variable",Pe],["invalidation",$e],["visibility",Ae],...t])},_source:{value:null,writable:!0}})}Object.defineProperties(G.prototype,{_resolve:{value:gt,writable:!0,configurable:!0},redefine:{value:mt,writable:!0,configurable:!0},define:{value:ht,writable:!0,configurable:!0},derive:{value:vt,writable:!0,configurable:!0},import:{value:_t,writable:!0,configurable:!0},value:{value:yt,writable:!0,configurable:!0},variable:{value:bt,writable:!0,configurable:!0},builtin:{value:wt,writable:!0,configurable:!0}});function mt(e){const t=this._scope.get(e);if(!t)throw new S(`${e} is not defined`);if(t._type===U)throw new S(`${e} is defined more than once`);return t.define.apply(t,arguments)}function ht(){const e=new T(ae,this);return e.define.apply(e,arguments)}function _t(){const e=new T(ae,this);return e.import.apply(e,arguments)}function bt(e,t){return new T(ae,this,e,t)}async function yt(e){let t=this._scope.get(e);if(!t)throw new S(`${e} is not defined`);if(t._observer===M){t=this.variable(!0).define([e],Y);try{return await oe(this._runtime,t)}finally{t.delete()}}else return oe(this._runtime,t)}async function oe(e,t){await e._compute();try{return await t._promise}catch(n){if(n===P)return oe(e,t);throw n}}function vt(e,t){const n=new Map,r=new Set,i=[];function o(a){let l=n.get(a);return l||(l=new G(a._runtime,a._builtins),l._source=a,n.set(a,l),i.push([l,a]),r.add(a),l)}const s=o(this);for(const a of e){const{alias:l,name:u}=typeof a=="object"?a:{name:a};s.import(u,l??u,t)}for(const a of r)for(const[l,u]of a._scope)if(u._definition===Y){if(a===this&&s._scope.has(l))continue;const c=u._inputs[0]._module;c._source&&o(c)}for(const[a,l]of i)for(const[u,c]of l._scope){const d=a._scope.get(u);if(!(d&&d._type!==V))if(c._definition===Y){const p=c._inputs[0],f=p._module;a.import(p._name,u,n.get(f)||f)}else a.define(u,c._inputs.map(Et),c._definition)}return s}function gt(e){let t=this._scope.get(e),n;if(!t)if(t=new T(V,this),this._builtins.has(e))t.define(e,re(this._builtins.get(e)));else if(this._runtime._builtin._scope.has(e))t.import(e,this._runtime._builtin);else{try{n=this._runtime._global(e)}catch(r){return t.define(e,Qe(r))}n===void 0?this._scope.set(t._name=e,t):t.define(e,re(n))}return t}function wt(e,t){this._builtins.set(e,t)}function Et(e){return e._name}const xt=typeof requestAnimationFrame=="function"?requestAnimationFrame:typeof setImmediate=="function"?setImmediate:e=>setTimeout(e,0);function Te(e,t=Vt){const n=this.module();if(Object.defineProperties(this,{_dirty:{value:new Set},_updates:{value:new Set},_precomputes:{value:[],writable:!0},_computing:{value:null,writable:!0},_init:{value:null,writable:!0},_modules:{value:new Map},_variables:{value:new Set},_disposed:{value:!1,writable:!0},_builtin:{value:n},_global:{value:t}}),e)for(const r in e)new T(V,n).define(r,[],e[r])}Object.defineProperties(Te.prototype,{_precompute:{value:Ct,writable:!0,configurable:!0},_compute:{value:St,writable:!0,configurable:!0},_computeSoon:{value:Pt,writable:!0,configurable:!0},_computeNow:{value:$t,writable:!0,configurable:!0},dispose:{value:It,writable:!0,configurable:!0},module:{value:Ot,writable:!0,configurable:!0}});function It(){this._computing=Promise.resolve(),this._disposed=!0,this._variables.forEach(e=>{e._invalidate(),e._version=NaN})}function Ot(e,t=A){let n;if(e===void 0)return(n=this._init)?(this._init=null,n):new G(this);if(n=this._modules.get(e),n)return n;this._init=n=new G(this),this._modules.set(e,n);try{e(this,t)}finally{this._init=null}return n}function Ct(e){this._precomputes.push(e),this._compute()}function St(){return this._computing||(this._computing=this._computeSoon())}function Pt(){return new Promise(xt).then(()=>this._disposed?void 0:this._computeNow())}async function $t(){let e=[],t,n,r=this._precomputes;if(r.length){this._precomputes=[];for(const o of r)o();await At(3)}t=new Set(this._dirty),t.forEach(function(o){o._inputs.forEach(t.add,t);const s=Bt(o);s>o._reachable?this._updates.add(o):s<o._reachable&&o._invalidate(),o._reachable=s},this),t=new Set(this._updates),t.forEach(function(o){o._reachable?(o._indegree=0,o._outputs.forEach(t.add,t)):(o._indegree=NaN,t.delete(o))}),this._computing=null,this._updates.clear(),this._dirty.clear(),t.forEach(function(o){o._outputs.forEach(kt)});do{for(t.forEach(function(o){o._indegree===0&&e.push(o)});n=e.pop();)Rt(n),n._outputs.forEach(i),t.delete(n);t.forEach(function(o){Tt(o)&&(qt(o,new S("circular definition")),o._outputs.forEach(Dt),t.delete(o))})}while(t.size);function i(o){--o._indegree===0&&e.push(o)}}function At(e=0){let t=Promise.resolve();for(let n=0;n<e;++n)t=t.then(()=>{});return t}function Tt(e){const t=new Set(e._inputs);for(const n of t){if(n===e)return!0;n._inputs.forEach(t.add,t)}return!1}function kt(e){++e._indegree}function Dt(e){--e._indegree}function Nt(e){return e._promise.catch(e._rejector)}function te(e){return new Promise(function(t){e._invalidate=t})}function Lt(e,t){let n=typeof IntersectionObserver=="function"&&t._observer&&t._observer._node,r=!n,i=A,o=A,s,a;return n&&(a=new IntersectionObserver(([l])=>(r=l.isIntersecting)&&(s=null,i())),a.observe(n),e.then(()=>(a.disconnect(),a=null,o()))),function(l){return r?Promise.resolve(l):a?(s||(s=new Promise((u,c)=>(i=u,o=c))),s.then(()=>l)):Promise.reject()}}function Rt(e){e._invalidate(),e._invalidate=A,e._pending();const t=e._value,n=++e._version,r=e._inputs,i=e._definition;let o=null;const s=e._promise=e._promise.then(a,a).then(l).then(u);function a(){return Promise.all(r.map(Nt))}function l(c){if(e._version!==n)throw P;for(let d=0,p=c.length;d<p;++d)switch(c[d]){case $e:{c[d]=o=te(e);break}case Ae:{o||(o=te(e)),c[d]=Lt(o,e);break}case Pe:{c[d]=e;break}}return i.apply(t,c)}function u(c){if(e._version!==n)throw P;return Ke(c)?((o||te(e)).then(Mt(c)),jt(e,n,c)):c}s.then(c=>{e._value=c,e._fulfilled(c)},c=>{c===P||e._version!==n||(e._value=void 0,e._rejected(c))})}function jt(e,t,n){const r=e._module._runtime;let i;function o(l){return new Promise(u=>u(n.next(i))).then(({done:u,value:c})=>u?void 0:Promise.resolve(c).then(l))}function s(){const l=o(u=>{if(e._version!==t)throw P;return i=u,a(u,l).then(()=>r._precompute(s)),e._fulfilled(u),u});l.catch(u=>{u===P||e._version!==t||(a(void 0,l),e._rejected(u))})}function a(l,u){return e._value=l,e._promise=u,e._outputs.forEach(r._updates.add,r._updates),r._compute()}return o(l=>{if(e._version!==t)throw P;return i=l,r._precompute(s),l})}function qt(e,t){e._invalidate(),e._invalidate=A,e._pending(),++e._version,e._indegree=NaN,(e._promise=Promise.reject(t)).catch(A),e._value=void 0,e._rejected(t)}function Mt(e){return function(){e.return()}}function Bt(e){if(e._observer!==M)return!0;const t=new Set(e._outputs);for(const n of t){if(n._observer!==M)return!0;n._outputs.forEach(t.add,t)}return!1}function Vt(e){return globalThis[e]}function Z(e,t,n){n=n||{};var r=e.ownerDocument,i=r.defaultView.CustomEvent;typeof i=="function"?i=new i(t,{detail:n}):(i=r.createEvent("Event"),i.initEvent(t,!1,!1),i.detail=n),e.dispatchEvent(i)}function ke(e){return Array.isArray(e)||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function De(e){return e===(e|0)+""}function O(e){const t=document.createElement("span");return t.className="observablehq--cellname",t.textContent=`${e} = `,t}const Ft=Symbol.prototype.toString;function L(e){return Ft.call(e)}const{getOwnPropertySymbols:zt,prototype:{hasOwnProperty:Ut}}=Object,{toStringTag:Wt}=Symbol,Ne={},F=zt;function Q(e,t){return Ut.call(e,t)}function ie(e){return e[Wt]||e.constructor&&e.constructor.name||"Object"}function E(e,t){try{const n=e[t];return n&&n.constructor,n}catch{return Ne}}const Yt=[{symbol:"@@__IMMUTABLE_INDEXED__@@",name:"Indexed",modifier:!0},{symbol:"@@__IMMUTABLE_KEYED__@@",name:"Keyed",modifier:!0},{symbol:"@@__IMMUTABLE_LIST__@@",name:"List",arrayish:!0},{symbol:"@@__IMMUTABLE_MAP__@@",name:"Map"},{symbol:"@@__IMMUTABLE_ORDERED__@@",name:"Ordered",modifier:!0,prefix:!0},{symbol:"@@__IMMUTABLE_RECORD__@@",name:"Record"},{symbol:"@@__IMMUTABLE_SET__@@",name:"Set",arrayish:!0,setish:!0},{symbol:"@@__IMMUTABLE_STACK__@@",name:"Stack",arrayish:!0}];function Le(e){try{let t=Yt.filter(({symbol:s})=>e[s]===!0);if(!t.length)return;const n=t.find(s=>!s.modifier),r=n.name==="Map"&&t.find(s=>s.modifier&&s.prefix),i=t.some(s=>s.arrayish),o=t.some(s=>s.setish);return{name:`${r?r.name:""}${n.name}`,symbols:t,arrayish:i&&!o,setish:o}}catch{return null}}const{getPrototypeOf:ce,getOwnPropertyDescriptors:Gt}=Object,Re=ce({});function je(e,t,n,r){let i=ke(e),o,s,a,l;e instanceof Map?e instanceof e.constructor?(o=`Map(${e.size})`,s=Zt):(o="Map()",s=j):e instanceof Set?e instanceof e.constructor?(o=`Set(${e.size})`,s=Jt):(o="Set()",s=j):i?(o=`${e.constructor.name}(${e.length})`,s=Xt):(l=Le(e))?(o=`Immutable.${l.name}${l.name==="Record"?"":`(${e.size})`}`,i=l.arrayish,s=l.arrayish?Kt:l.setish?Ht:en):r?(o=ie(e),s=Qt):(o=ie(e),s=j);const u=document.createElement("span");u.className="observablehq--expanded",n&&u.appendChild(O(n));const c=u.appendChild(document.createElement("a"));c.innerHTML=`<svg width=8 height=8 class='observablehq--caret'>
    <path d='M4 7L0 1h8z' fill='currentColor' />
  </svg>`,c.appendChild(document.createTextNode(`${o}${i?" [":" {"}`)),c.addEventListener("mouseup",function(d){d.stopPropagation(),H(u,de(e,null,n,r))}),s=s(e);for(let d=0;!(a=s.next()).done&&d<20;++d)u.appendChild(a.value);if(!a.done){const d=u.appendChild(document.createElement("a"));d.className="observablehq--field",d.style.display="block",d.appendChild(document.createTextNode("  … more")),d.addEventListener("mouseup",function(p){p.stopPropagation(),u.insertBefore(a.value,u.lastChild.previousSibling);for(let f=0;!(a=s.next()).done&&f<19;++f)u.insertBefore(a.value,u.lastChild.previousSibling);a.done&&u.removeChild(u.lastChild.previousSibling),Z(u,"load")})}return u.appendChild(document.createTextNode(i?"]":"}")),u}function*Zt(e){for(const[t,n]of e)yield tn(t,n);yield*j(e)}function*Jt(e){for(const t of e)yield Me(t);yield*j(e)}function*Ht(e){for(const t of e)yield Me(t)}function*Xt(e){for(let t=0,n=e.length;t<n;++t)t in e&&(yield $(t,E(e,t),"observablehq--index"));for(const t in e)!De(t)&&Q(e,t)&&(yield $(t,E(e,t),"observablehq--key"));for(const t of F(e))yield $(L(t),E(e,t),"observablehq--symbol")}function*Kt(e){let t=0;for(const n=e.size;t<n;++t)yield $(t,e.get(t),!0)}function*Qt(e){for(const n in Gt(e))yield $(n,E(e,n),"observablehq--key");for(const n of F(e))yield $(L(n),E(e,n),"observablehq--symbol");const t=ce(e);t&&t!==Re&&(yield qe(t))}function*j(e){for(const n in e)Q(e,n)&&(yield $(n,E(e,n),"observablehq--key"));for(const n of F(e))yield $(L(n),E(e,n),"observablehq--symbol");const t=ce(e);t&&t!==Re&&(yield qe(t))}function*en(e){for(const[t,n]of e)yield $(t,n,"observablehq--key")}function qe(e){const t=document.createElement("div"),n=t.appendChild(document.createElement("span"));return t.className="observablehq--field",n.className="observablehq--prototype-key",n.textContent="  <prototype>",t.appendChild(document.createTextNode(": ")),t.appendChild(w(e,void 0,void 0,void 0,!0)),t}function $(e,t,n){const r=document.createElement("div"),i=r.appendChild(document.createElement("span"));return r.className="observablehq--field",i.className=n,i.textContent=`  ${e}`,r.appendChild(document.createTextNode(": ")),r.appendChild(w(t)),r}function tn(e,t){const n=document.createElement("div");return n.className="observablehq--field",n.appendChild(document.createTextNode("  ")),n.appendChild(w(e)),n.appendChild(document.createTextNode(" => ")),n.appendChild(w(t)),n}function Me(e){const t=document.createElement("div");return t.className="observablehq--field",t.appendChild(document.createTextNode("  ")),t.appendChild(w(e)),t}function we(e){const t=window.getSelection();return t.type==="Range"&&(t.containsNode(e,!0)||e.contains(t.anchorNode)||e.contains(t.focusNode))}function de(e,t,n,r){let i=ke(e),o,s,a,l;if(e instanceof Map?e instanceof e.constructor?(o=`Map(${e.size})`,s=nn):(o="Map()",s=q):e instanceof Set?e instanceof e.constructor?(o=`Set(${e.size})`,s=rn):(o="Set()",s=q):i?(o=`${e.constructor.name}(${e.length})`,s=an):(l=Le(e))?(o=`Immutable.${l.name}${l.name==="Record"?"":`(${e.size})`}`,i=l.arrayish,s=l.arrayish?sn:l.setish?on:un):(o=ie(e),s=q),t){const d=document.createElement("span");return d.className="observablehq--shallow",n&&d.appendChild(O(n)),d.appendChild(document.createTextNode(o)),d.addEventListener("mouseup",function(p){we(d)||(p.stopPropagation(),H(d,de(e)))}),d}const u=document.createElement("span");u.className="observablehq--collapsed",n&&u.appendChild(O(n));const c=u.appendChild(document.createElement("a"));c.innerHTML=`<svg width=8 height=8 class='observablehq--caret'>
    <path d='M7 4L1 8V0z' fill='currentColor' />
  </svg>`,c.appendChild(document.createTextNode(`${o}${i?" [":" {"}`)),u.addEventListener("mouseup",function(d){we(u)||(d.stopPropagation(),H(u,je(e,null,n,r)))},!0),s=s(e);for(let d=0;!(a=s.next()).done&&d<20;++d)d>0&&u.appendChild(document.createTextNode(", ")),u.appendChild(a.value);return a.done||u.appendChild(document.createTextNode(", …")),u.appendChild(document.createTextNode(i?"]":"}")),u}function*nn(e){for(const[t,n]of e)yield ln(t,n);yield*q(e)}function*rn(e){for(const t of e)yield w(t,!0);yield*q(e)}function*on(e){for(const t of e)yield w(t,!0)}function*sn(e){let t=-1,n=0;for(const r=e.size;n<r;++n)n>t+1&&(yield J(n-t-1)),yield w(e.get(n),!0),t=n;n>t+1&&(yield J(n-t-1))}function*an(e){let t=-1,n=0;for(const r=e.length;n<r;++n)n in e&&(n>t+1&&(yield J(n-t-1)),yield w(E(e,n),!0),t=n);n>t+1&&(yield J(n-t-1));for(const r in e)!De(r)&&Q(e,r)&&(yield B(r,E(e,r),"observablehq--key"));for(const r of F(e))yield B(L(r),E(e,r),"observablehq--symbol")}function*q(e){for(const t in e)Q(e,t)&&(yield B(t,E(e,t),"observablehq--key"));for(const t of F(e))yield B(L(t),E(e,t),"observablehq--symbol")}function*un(e){for(const[t,n]of e)yield B(t,n,"observablehq--key")}function J(e){const t=document.createElement("span");return t.className="observablehq--empty",t.textContent=e===1?"empty":`empty × ${e}`,t}function B(e,t,n){const r=document.createDocumentFragment(),i=r.appendChild(document.createElement("span"));return i.className=n,i.textContent=e,r.appendChild(document.createTextNode(": ")),r.appendChild(w(t,!0)),r}function ln(e,t){const n=document.createDocumentFragment();return n.appendChild(w(e,!0)),n.appendChild(document.createTextNode(" => ")),n.appendChild(w(t,!0)),n}function cn(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),o=e.getUTCMilliseconds();return`${dn(e.getUTCFullYear())}-${C(e.getUTCMonth()+1,2)}-${C(e.getUTCDate(),2)}${n||r||i||o?`T${C(n,2)}:${C(r,2)}${i||o?`:${C(i,2)}${o?`.${C(o,3)}`:""}`:""}Z`:""}`}function dn(e){return e<0?`-${C(-e,6)}`:e>9999?`+${C(e,6)}`:C(e,4)}function C(e,t){return`${e}`.padStart(t,"0")}function fn(e){return cn(e,"Invalid Date")}var pn=Error.prototype.toString;function mn(e){return e.stack||pn.call(e)}var hn=RegExp.prototype.toString;function _n(e){return hn.call(e)}const ne=20;function bn(e,t,n,r){if(t===!1){if(xe(e,/["\n]/g)<=xe(e,/`|\${/g)){const u=document.createElement("span");r&&u.appendChild(O(r));const c=u.appendChild(document.createElement("span"));return c.className="observablehq--string",c.textContent=JSON.stringify(e),u}const s=e.split(`
`);if(s.length>ne&&!n){const u=document.createElement("div");r&&u.appendChild(O(r));const c=u.appendChild(document.createElement("span"));c.className="observablehq--string",c.textContent="`"+Ee(s.slice(0,ne).join(`
`));const d=u.appendChild(document.createElement("span")),p=s.length-ne;return d.textContent=`Show ${p} truncated line${p>1?"s":""}`,d.className="observablehq--string-expand",d.addEventListener("mouseup",function(f){f.stopPropagation(),H(u,w(e,t,!0,r))}),u}const a=document.createElement("span");r&&a.appendChild(O(r));const l=a.appendChild(document.createElement("span"));return l.className=`observablehq--string${n?" observablehq--expanded":""}`,l.textContent="`"+Ee(e)+"`",a}const i=document.createElement("span");r&&i.appendChild(O(r));const o=i.appendChild(document.createElement("span"));return o.className="observablehq--string",o.textContent=JSON.stringify(e.length>100?`${e.slice(0,50)}…${e.slice(-49)}`:e),i}function Ee(e){return e.replace(/[\\`\x00-\x09\x0b-\x19]|\${/g,yn)}function yn(e){var t=e.charCodeAt(0);switch(t){case 8:return"\\b";case 9:return"\\t";case 11:return"\\v";case 12:return"\\f";case 13:return"\\r"}return t<16?"\\x0"+t.toString(16):t<32?"\\x"+t.toString(16):"\\"+e}function xe(e,t){for(var n=0;t.exec(e);)++n;return n}var vn=Function.prototype.toString,gn={prefix:"async ƒ"},wn={prefix:"async ƒ*"},Ie={prefix:"class"},En={prefix:"ƒ"},xn={prefix:"ƒ*"};function In(e,t){var n,r,i=vn.call(e);switch(e.constructor&&e.constructor.name){case"AsyncFunction":n=gn;break;case"AsyncGeneratorFunction":n=wn;break;case"GeneratorFunction":n=xn;break;default:n=/^class\b/.test(i)?Ie:En;break}return n===Ie?R(n,"",t):(r=/^(?:async\s*)?(\w+)\s*=>/.exec(i))?R(n,"("+r[1]+")",t):(r=/^(?:async\s*)?\(\s*(\w+(?:\s*,\s*\w+)*)?\s*\)/.exec(i))?R(n,r[1]?"("+r[1].replace(/\s*,\s*/g,", ")+")":"()",t):(r=/^(?:async\s*)?function(?:\s*\*)?(?:\s*\w+)?\s*\(\s*(\w+(?:\s*,\s*\w+)*)?\s*\)/.exec(i))?R(n,r[1]?"("+r[1].replace(/\s*,\s*/g,", ")+")":"()",t):R(n,"(…)",t)}function R(e,t,n){var r=document.createElement("span");r.className="observablehq--function",n&&r.appendChild(O(n));var i=r.appendChild(document.createElement("span"));return i.className="observablehq--keyword",i.textContent=e.prefix,r.appendChild(document.createTextNode(t)),r}const{prototype:{toString:On}}=Object;function w(e,t,n,r,i){let o=typeof e;switch(o){case"boolean":case"undefined":{e+="";break}case"number":{e=e===0&&1/e<0?"-0":e+"";break}case"bigint":{e=e+"n";break}case"symbol":{e=L(e);break}case"function":return In(e,r);case"string":return bn(e,t,n,r);default:{if(e===null){o=null,e="null";break}if(e instanceof Date){o="date",e=fn(e);break}if(e===Ne){o="forbidden",e="[forbidden]";break}switch(On.call(e)){case"[object RegExp]":{o="regexp",e=_n(e);break}case"[object Error]":case"[object DOMException]":{o="error",e=mn(e);break}default:return(n?je:de)(e,t,r,i)}break}}const s=document.createElement("span");r&&s.appendChild(O(r));const a=s.appendChild(document.createElement("span"));return a.className=`observablehq--${o}`,a.textContent=e,s}function H(e,t){e.classList.contains("observablehq--inspect")&&t.classList.add("observablehq--inspect"),e.parentNode.replaceChild(t,e),Z(t,"load")}const Cn=/\s+\(\d+:\d+\)$/m;class X{constructor(t){if(!t)throw new Error("invalid node");this._node=t,t.classList.add("observablehq")}pending(){const{_node:t}=this;t.classList.remove("observablehq--error"),t.classList.add("observablehq--running")}fulfilled(t,n){const{_node:r}=this;if((!Sn(t)||t.parentNode&&t.parentNode!==r)&&(t=w(t,!1,r.firstChild&&r.firstChild.classList&&r.firstChild.classList.contains("observablehq--expanded"),n),t.classList.add("observablehq--inspect")),r.classList.remove("observablehq--running","observablehq--error"),r.firstChild!==t)if(r.firstChild){for(;r.lastChild!==r.firstChild;)r.removeChild(r.lastChild);r.replaceChild(t,r.firstChild)}else r.appendChild(t);Z(r,"update")}rejected(t,n){const{_node:r}=this;for(r.classList.remove("observablehq--running"),r.classList.add("observablehq--error");r.lastChild;)r.removeChild(r.lastChild);var i=document.createElement("div");i.className="observablehq--inspect",n&&i.appendChild(O(n)),i.appendChild(document.createTextNode((t+"").replace(Cn,""))),r.appendChild(i),Z(r,"error",{error:t})}}X.into=function(e){if(typeof e=="string"&&(e=document.querySelector(e),e==null))throw new Error("container not found");return function(){return new X(e.appendChild(document.createElement("div")))}};function Sn(e){return(e instanceof Element||e instanceof Text)&&e instanceof e.constructor}function Pn(e,t){const n=document.createElement("div");if(new X(n).fulfilled(e),t)for(const r of t){let i=n;for(const o of r)i=i?.childNodes[o];i?.dispatchEvent(new Event("mouseup"))}return n}function $n(e){const t=document.createElement("div");return new X(t).rejected(e),t}function An(e){if(!kn(e))return;const t=e.querySelectorAll(".observablehq--expanded");if(t.length)return Array.from(t,n=>Dn(e,n))}function Tn(e){return e.nodeType===1}function kn(e){return Tn(e)&&e.classList.contains("observablehq")}function Dn(e,t){const n=[];for(;t!==e;)n.push(Nn(t)),t=t.parentNode;return n.reverse()}function Nn(e){return Array.prototype.indexOf.call(e.parentNode.childNodes,e)}const Ln=["audio source[src]","audio[src]","img[src]","picture source[src]","video source[src]","video[src]"].join(),Rn=["img[srcset]","picture source[srcset]"].join(),jn=["a[href][download]","link[href]"].join(),qn=[[Ln,"src"],[Rn,"srcset"],[jn,"href"]];function Mn(e,t){const n=r=>t.get(Fn(r))??r;for(const[r,i]of qn)for(const o of e.querySelectorAll(r)){if(Bn(o))continue;const s=decodeURI(o.getAttribute(i));i==="srcset"?o.setAttribute(i,Un(s,n)):o.setAttribute(i,n(s))}}function Bn(e){return/(?:^|\s)external(?:\s|$)/i.test(e.getAttribute("rel")??"")}function Vn(e){const t=e.indexOf("?"),n=e.indexOf("#"),r=t>=0&&n>=0?Math.min(t,n):t>=0?t:n;return r>=0?e.slice(0,r):e}function Fn(e){const t=Vn(e);return zn(t)?t:`./${t}`}function zn(e){return["./","../","/"].some(t=>e.startsWith(t))}function Un(e,t){return e.trim().split(/\s*,\s*/).filter(n=>n).map(n=>{const r=n.split(/\s+/),i=t(r[0]);return i&&(r[0]=encodeURI(i)),r.join(" ")}).join(", ")}function Be(e,t){const{root:n,expanded:r}=e,i=Yn(t,n)?t:Pn(t,r[n.childNodes.length]);Ve(e,i)}function Ve(e,t){if(t.nodeType===11){let n;for(;n=t.firstChild;)e.root.appendChild(n)}else e.root.appendChild(t)}function Wn(e,t){Ve(e,$n(t))}function Yn(e,t){return(e instanceof Element||e instanceof Text)&&e instanceof e.constructor&&(!e.parentNode||t.contains(e))}function D(e){for(e.autoclear=!1,e.expanded=Array.from(e.root.childNodes,An);e.root.lastChild;)e.root.lastChild.remove()}function Gn(e,{autodisplay:t,assets:n}){return{_error:!1,_node:e.root,pending(){this._error&&(this._error=!1,D(e))},fulfilled(r){t?(n&&r instanceof Element&&Mn(r,n),D(e),Be(e,r)):e.autoclear&&D(e)},rejected(r){console.error(r),this._error=!0,D(e),Wn(e,r)}}}function ee(e){let t,n,r,i=!1;const o=e(s=>(r=s,t!=null?(t(s),t=n=void 0):i=!0,s));if(o!=null&&typeof o!="function")throw new Error(typeof o=="object"&&typeof o.then=="function"?"async initializers are not supported":"initializer returned something, but not a dispose function");return{async next(){return{done:!1,value:await(i?(i=!1,r):new Promise((s,a)=>(t=s,n=a)))}},async return(){return n!=null&&(n(new Error("Generator returned")),t=n=void 0),o?.(),{done:!0,value:void 0}},async throw(s){return n!=null&&(n(s),t=n=void 0),o?.(),{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}function se(e){return ee(t=>{const n=Zn(e),r=Oe(e),i=()=>t(Oe(e));return e.addEventListener(n,i),r!==void 0&&t(r),()=>e.removeEventListener(n,i)})}function Oe(e){const t=e,n=e;if("type"in e)switch(e.type){case"range":case"number":return t.valueAsNumber;case"date":return t.valueAsDate;case"checkbox":return t.checked;case"file":return t.multiple?t.files:t.files[0];case"select-multiple":return Array.from(n.selectedOptions,r=>r.value)}return t.value}function Zn(e){if("type"in e)switch(e.type){case"button":case"submit":case"checkbox":return"click";case"file":return"change"}return"input"}async function*Fe(){for(;;)yield Date.now()}function Jn(e){let t,n;const r=[],i=e(o=>(r.push(o),t!=null&&(t(r.shift()),t=void 0),o));if(i!=null&&typeof i!="function")throw new Error(typeof i=="object"&&typeof i.then=="function"?"async initializers are not supported":"initializer returned something, but not a dispose function");return{async next(){return{done:!1,value:await(r.length?r.shift():new Promise((o,s)=>(t=o,n=s)))}},async return(){return n!=null&&(n(new Error("Generator returned")),t=n=void 0),i?.(),{done:!0,value:void 0}},async throw(o){return n!=null&&(n(o),t=n=void 0),i?.(),{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}function ze(e,t){return ee(n=>{let r;const i=new ResizeObserver(([o])=>{const s=o.contentRect.width;s!==r&&n(r=s)});return i.observe(e,t),()=>i.disconnect()})}const Hn=Object.freeze(Object.defineProperty({__proto__:null,input:se,now:Fe,observe:ee,queue:Jn,width:ze},Symbol.toStringTag,{value:"Module"}));function Ue(e){let t;return Object.defineProperty(ee(n=>{t=n,e!==void 0&&t(e)}),"value",{get:()=>e,set:n=>(e=n,void t?.(e))})}function Xn(e){const t=Ue(e);return[t,{get value(){return t.value},set value(n){t.value=n}}]}function Kn(e,t,n,r=Gn){const{id:i,body:o,inputs:s=[],outputs:a=[],output:l,autodisplay:u,autoview:c,automutable:d}=n,p=t.variables,f=e.variable(r(t,n),{shadow:{}}),v=l??(a.length?`cell ${i}`:null);if(t.autoclear=!0,s.includes("display")||s.includes("view")){let y=-1;const b=new f.constructor(2,f._module);if(b.define(s.filter(g=>g!=="display"&&g!=="view"),()=>{const g=f._version;return z=>{if(g<y)throw new Error("stale display");if(t.variables[0]!==f)throw new Error("stale display");return g>y&&D(t),y=g,Be(t,z),z}}),f._shadow.set("display",b),s.includes("view")){const g=new f.constructor(2,f._module,null,{shadow:{}});g._shadow.set("display",b),g.define(["display"],z=>Je=>se(z(Je))),f._shadow.set("view",g)}}else u||D(t);if(p.push(f.define(v,s,o)),l!=null){if(c){const y=Ce(l,"viewof$");p.push(e.define(y,[l],se))}else if(d){const y=Ce(l,"mutable "),b=`cell ${i}`;f.define(y,[b],([g])=>g),p.push(e.define(l,s,o),e.define(b,[l],Xn),e.define(`mutable$${y}`,[b],([,g])=>g))}}else for(const y of a)p.push(e.variable(!0).define(y,[v],b=>b[y]))}function Ce(e,t){if(!e.startsWith(t))throw new Error(`expected ${t}: ${e}`);return e.slice(t.length)}const Se=new Map,fe=(e,t=document.baseURI)=>{const n=new URL(e,t).href;let r=Se.get(n);return r||(r=new N(n,e.split("/").pop()),Se.set(n,r)),r};async function k(e){const t=await fetch(e.href);if(!t.ok)throw new Error(`Unable to load file: ${e.name}`);return t}class Qn{constructor(t,n=er(t),r,i){Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mimeType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lastModified",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperties(this,{name:{value:`${t}`,enumerable:!0},mimeType:{value:`${n}`,enumerable:!0},lastModified:{value:r===void 0?void 0:+r,enumerable:!0},size:{value:i===void 0?void 0:+i,enumerable:!0}})}async url(){return this.href}async blob(){return(await k(this)).blob()}async arrayBuffer(){return(await k(this)).arrayBuffer()}async text(t){return t===void 0?(await k(this)).text():new TextDecoder(t).decode(await this.arrayBuffer())}async json(){return(await k(this)).json()}async stream(){return(await k(this)).body}async dsv({delimiter:t=",",array:n=!1,typed:r=!1}={}){const[i,o]=await Promise.all([this.text(),m(()=>import("https://cdn.jsdelivr.net/npm/d3-dsv/+esm"),[],import.meta.url)]),s=o.dsvFormat(t);return(n?s.parseRows:s.parse)(i,r&&o.autoType)}async csv(t){return this.dsv({...t,delimiter:","})}async tsv(t){return this.dsv({...t,delimiter:"	"})}async image(t){const n=await this.url();return new Promise((r,i)=>{const o=new Image;new URL(n,document.baseURI).origin!==location.origin&&(o.crossOrigin="anonymous"),Object.assign(o,t),o.onload=()=>r(o),o.onerror=()=>i(new Error(`Unable to load file: ${this.name}`)),o.src=n})}async arrow(){const[t,n]=await Promise.all([m(()=>import("https://cdn.jsdelivr.net/npm/apache-arrow@17.0.0/+esm"),[],import.meta.url),k(this)]);return t.tableFromIPC(n)}async arquero(t){let n,r;switch(this.mimeType){case"application/json":n=this.text(),r="fromJSON";break;case"text/tab-separated-values":t?.delimiter===void 0&&(t={...t,delimiter:"	"});case"text/csv":n=this.text(),r="fromCSV";break;default:if(/\.arrow$/i.test(this.name))n=this.arrow(),r="fromArrow";else if(/\.parquet$/i.test(this.name))n=this.parquet(),r="fromArrow";else throw new Error(`unable to determine Arquero loader: ${this.name}`);break}const[i,o]=await Promise.all([m(()=>import("https://cdn.jsdelivr.net/npm/arquero/+esm"),[],import.meta.url),n]);return i[r](o,t)}async parquet(){const[t,n,r]=await Promise.all([m(()=>import("https://cdn.jsdelivr.net/npm/apache-arrow@17.0.0/+esm"),[],import.meta.url),m(()=>import("https://cdn.jsdelivr.net/npm/parquet-wasm/+esm"),[],import.meta.url).then(async i=>(await i.default("https://cdn.jsdelivr.net/npm/parquet-wasm/esm/parquet_wasm_bg.wasm"),i)),this.arrayBuffer()]);return t.tableFromIPC(n.readParquet(new Uint8Array(r)).intoIPCStream())}async xml(t="application/xml"){return new DOMParser().parseFromString(await this.text(),t)}async html(){return this.xml("text/html")}}function er(e){const t=e.lastIndexOf("."),n=e.lastIndexOf("/");switch(t>0&&(n<0||t>n)?e.slice(t).toLowerCase():""){case".csv":return"text/csv";case".tsv":return"text/tab-separated-values";case".json":return"application/json";case".html":return"text/html";case".xml":return"application/xml";case".png":return"image/png";case".jpg":return"image/jpg";case".js":return"text/javascript";default:return"application/octet-stream"}}class N extends Qn{constructor(t,n,r,i,o){super(n,r,i,o),Object.defineProperty(this,"href",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"href",{value:t})}}Object.defineProperty(N,"name",{value:"FileAttachment"});fe.prototype=N.prototype;function tr(e){function t(n){const r=e(n+="");if(r==null)throw new Error(`File not found: ${n}`);if(typeof r=="object"&&"url"in r){const{url:i,mimeType:o}=r;return new N(i,n,o)}return new N(r,n)}return t.prototype=N.prototype,t}function nr(e,{length:t=50,fallback:n="untitled",separator:r="-"}={}){const i=e.normalize("NFD").replace(/[\u0300-\u036f'‘’]/g,"").toLowerCase().split(/\W+/g).filter(rr);let o=-1;for(let s=0,a=i.length;++o<a;)if((s+=i[o].length)+o>t){i[o]=i[o].substring(0,t-s+i[o].length-o);break}return i.slice(0,o+1).filter(Boolean).join(r)||n.slice(0,t)}function rr(e){return e.length>0}async function pe(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return new Uint8Array(n).reduce((r,i)=>r<<8n|BigInt(i),0n)}function me(e,t){return e.toString(36).padStart(t,"0").slice(0,t)}async function or(e,...t){return me(await pe(JSON.stringify([e,...t])),16)}async function ir(e){return me(await pe(e),16)}async function We(e){return/^[\w-]+$/.test(e)?e:`${nr(sr(e))}.${me(await pe(e),8)}`}function sr(e){return e.replace(/^.*\//,"")}const he=(e,t)=>new _e(e,ar(t));function ar({id:e,since:t}={}){const n={};return e!==void 0&&(n.id=e),t!==void 0&&(n.since=new Date(t)),n}class _e{constructor(t,n){Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperties(this,{name:{value:t,enumerable:!0},options:{value:n,enumerable:!0}})}async sql(t,...n){const r=await this.cachePath(t,...n),i=await fetch(r);if(!i.ok)throw new Error(`failed to fetch: ${r}`);return await i.json().then(Ye)}async cachePath(t,...n){return`.observable/cache/${await We(this.name)}-${await or(t,...n)}.json`}}function Ye({rows:e,schema:t,date:n,...r}){for(const i of t)switch(i.type){case"bigint":{const{name:o}=i;for(const s of e){const a=s[o];a!=null&&(s[o]=Number(a))}break}case"date":{const{name:o}=i;for(const s of e){const a=s[o];a!=null&&(s[o]=ur(a))}break}}return n!=null&&(n=new Date(n)),Object.assign(e,{schema:t,date:n},r)}function ur(e){return new Date(/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}(?::\d{2})?$/.test(e)?e+"Z":e)}he.revive=Ye;he.prototype=_e.prototype;Object.defineProperty(_e,"name",{value:"DatabaseClient"});function lr(e,t){const n=document.createElement("canvas");return n.width=e,n.height=t,n}function cr(e,t,n=devicePixelRatio){const r=document.createElement("canvas");r.width=e*n,r.height=t*n,r.style.width=`${e}px`;const i=r.getContext("2d");return i.scale(n,n),i}function dr(e,t){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("viewBox",`0 0 ${e} ${t}`),n.setAttribute("width",`${e}`),n.setAttribute("height",`${t}`),n}function fr(e){return document.createTextNode(e)}let pr=0;function mr(e){return new hr(`O-${e==null?"":`${e}-`}${++pr}`)}class hr{constructor(t){Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"href",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.id=t,this.href=new URL(`#${t}`,location.href).href}toString(){return`url(${this.href})`}}const _r=Object.freeze(Object.defineProperty({__proto__:null,canvas:lr,context2d:cr,svg:dr,text:fr,uid:mr},Symbol.toStringTag,{value:"Module"}));function br(e){switch(e){case"html":case"text":return".txt";case"jpeg":return".jpg";case"json":case"arrow":case"parquet":case"csv":case"tsv":case"png":case"gif":case"svg":case"webp":case"xml":return`.${e}`;default:return".bin"}}const Ge=(e,t)=>new be(e,yr(t));function yr({format:e="buffer",id:t,since:n}={}){const r={format:e};return t!==void 0&&(r.id=t),n!==void 0&&(r.since=new Date(n)),r}class be{constructor(t,n){Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperties(this,{name:{value:t,enumerable:!0},options:{value:n,enumerable:!0}})}async run(t){return fe(await this.cachePath(t))}async cachePath(t){const{format:n}=this.options;return`.observable/cache/${await We(this.name)}-${await ir(t)}${br(n)}`}}Ge.prototype=be.prototype;Object.defineProperty(be,"name",{value:"Interpreter"});var vr=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},gr=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},W;class wr{constructor(){W.set(this,void 0),Object.defineProperty(this,"fulfilled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rejected",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.next()}async next(){const t=await vr(this,W,"f");return gr(this,W,new Promise((n,r)=>(this.fulfilled=n,this.rejected=r)),"f"),{done:!1,value:t}}throw(){return{done:!0}}return(){return{done:!0}}}W=new WeakMap;const Er=()=>m(()=>import("https://cdn.jsdelivr.net/npm/lodash/+esm"),[],import.meta.url).then(e=>e.default),xr=()=>m(()=>import("https://cdn.jsdelivr.net/npm/arquero/+esm"),[],import.meta.url),Ir=()=>m(()=>import("https://cdn.jsdelivr.net/npm/apache-arrow@17.0.0/+esm"),[],import.meta.url),Or=()=>m(()=>import("https://cdn.jsdelivr.net/npm/d3/+esm"),[],import.meta.url),Cr=()=>m(()=>import("./dot-DSyh6hFx.js"),[],import.meta.url).then(e=>e.dot),Sr=()=>m(()=>import("https://cdn.jsdelivr.net/npm/@duckdb/duckdb-wasm@1.29.0/+esm"),[],import.meta.url),Pr=()=>m(()=>import("./duckdb-CSfQbOPO.js"),[],import.meta.url).then(e=>e.DuckDBClient),$r=()=>m(()=>import("https://cdn.jsdelivr.net/npm/echarts/+esm"),[],import.meta.url),Ar=()=>m(()=>import("https://cdn.jsdelivr.net/npm/htl/+esm"),[],import.meta.url),Tr=()=>m(()=>import("https://cdn.jsdelivr.net/npm/htl/+esm"),[],import.meta.url).then(e=>e.html),kr=()=>m(()=>import("https://cdn.jsdelivr.net/npm/htl/+esm"),[],import.meta.url).then(e=>e.svg),Dr=()=>m(()=>import("./inputs-DoHVubAa.js"),__vite__mapDeps([0,1]),import.meta.url),Nr=()=>m(()=>import("./leaflet-D54mqpIu.js"),[],import.meta.url),Lr=()=>m(()=>import("./mapboxgl-C94UFoDx.js"),[],import.meta.url).then(e=>e.default),Rr=()=>m(()=>import("./md-C7kwcwtH.js"),[],import.meta.url).then(e=>e.md),jr=()=>m(()=>import("./mermaid-CWCaPgOr.js"),[],import.meta.url).then(e=>e.mermaid),qr=()=>m(()=>import("https://cdn.jsdelivr.net/npm/@observablehq/plot/+esm"),[],import.meta.url),Mr=()=>m(()=>import("https://cdn.jsdelivr.net/npm/react/+esm"),[],import.meta.url),Br=()=>m(()=>import("https://cdn.jsdelivr.net/npm/react-dom/+esm"),[],import.meta.url),Vr=()=>m(()=>import("./tex-BE43Lb2g.js"),[],import.meta.url).then(e=>e.tex),Fr=()=>m(()=>import("https://cdn.jsdelivr.net/npm/topojson-client/+esm"),[],import.meta.url),zr=()=>m(()=>import("./vega-lite-ClQwpDTB.js"),[],import.meta.url).then(e=>e.vl),Ur=Object.freeze(Object.defineProperty({__proto__:null,Arrow:Ir,DuckDBClient:Pr,Inputs:Dr,L:Nr,Plot:qr,React:Mr,ReactDOM:Br,_:Er,aq:xr,d3:Or,dot:Cr,duckdb:Sr,echarts:$r,htl:Ar,html:Tr,mapboxgl:Lr,md:Rr,mermaid:jr,svg:kr,tex:Vr,topojson:Fr,vl:zr},Symbol.toStringTag,{value:"Module"}));ye.resolve=Ze;function ye(...e){return e.length===1?import(Ze(e[0])):Promise.all(e.map(t=>ye(t))).then(t=>Object.assign({},...t))}function Wr(e){const t=e.split("/"),n=e.startsWith("@")?[t.shift(),t.shift()].join("/"):t.shift(),r=n.indexOf("@",1),i=r>0?n.slice(0,r):n,o=r>0?n.slice(r):"",s=t.length>0?`/${t.join("/")}`:"";return{name:i,range:o,path:s}}function Ze(e){const t=String(e);if(Yr(t)||Gr(t))return t;const{name:n,range:r,path:i}=Wr(t);return`https://cdn.jsdelivr.net/npm/${n}${r}${i+(Zr(i)||Jr(i)?"":"/+esm")}`}function Yr(e){return/^\w+:/.test(e)}function Gr(e){return/^(\.\/|\.\.\/|\/)/.test(e)}function Zr(e){return/(\.\w*)$/.test(e)}function Jr(e){return/(\/)$/.test(e)}const Hr=()=>I(x("aapl.csv")),Xr=()=>I(x("alphabet.csv")),Kr=()=>I(x("cars.csv")),Qr=()=>I(x("citywages.csv")),eo=()=>I(x("diamonds.csv")),to=()=>I(x("flare.csv")),no=()=>I(x("industries.csv")),ro=()=>uo(x("miserables.json")),oo=()=>I(x("olympians.csv")),io=()=>I(x("penguins.csv")),so=()=>I(x("pizza.csv")),ao=()=>I(x("weather.csv"));function x(e){return`https://cdn.jsdelivr.net/npm/@observablehq/sample-datasets/${e}`}async function uo(e){const t=await fetch(e);if(!t.ok)throw new Error(`unable to fetch ${e}: status ${t.status}`);return t.json()}async function lo(e){const t=await fetch(e);if(!t.ok)throw new Error(`unable to fetch ${e}: status ${t.status}`);return t.text()}async function I(e,t){const[n,r]=await Promise.all([lo(e),m(()=>import("https://cdn.jsdelivr.net/npm/d3-dsv/+esm"),[],import.meta.url)]);return r.csvParse(n,r.autoType)}const co=Object.freeze(Object.defineProperty({__proto__:null,aapl:Hr,alphabet:Xr,cars:Kr,citywages:Qr,diamonds:eo,flare:to,industries:no,miserables:ro,olympians:oo,penguins:io,pizza:so,weather:ao},Symbol.toStringTag,{value:"Module"})),fo=document.querySelector("main")??document.body,po={now:()=>Fe(),width:()=>ze(fo),DatabaseClient:()=>he,FileAttachment:()=>fe,Generators:()=>Hn,Interpreter:()=>Ge,Mutable:()=>Ue,DOM:()=>_r,require:()=>ye,__ojs_observer:()=>()=>new wr,...Ur,...co};class mo{constructor(t=po){Object.defineProperty(this,"runtime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"main",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const n=new Te({...t,__ojs_runtime:()=>n});this.runtime=Object.assign(n,{fileAttachments:tr}),this.main=n.module()}define(t,n,r){Kn(this.main,t,n,r)}}const K=new mo;K.runtime;const ho=K.main,h=K.define.bind(K);ho.constructor.prototype.defines=function(e){return this._scope.has(e)||this._builtins.has(e)||this._runtime._builtin._scope.has(e)};const _o=""+new URL("riate-DoSpDk7S.jpeg",import.meta.url).href,bo=""+new URL("Migreurop-DCTEeAmy.jpg",import.meta.url).href,yo=""+new URL("style-CGqPAwzP.css",import.meta.url).href,_=new Map([["./riate.jpeg",_o],["./Migreurop.jpg",bo],["./style.css",yo]]);h({root:document.getElementById("cell-1"),expanded:[],variables:[]},{id:1,body:(e,t,n)=>e`# Mourir aux portes de l'Europe</ins>

## Mise à jour de la carte de Migreurop

<small>Document réalisé par [Nicolas Lambert](https://neocarto.github.io/cv/) avec Observable Notebooks 2.0<br/>[CNRS](https://www.cnrs.fr/fr) / [UAR RIATE](https://riate.cnrs.fr/) - Centre pour l'analyse spatiale et la géovisualisation<br/>Les cartes de sont générées automatiquement à l'aide de la bibliothèque JavaScript [**\`geoviz\`**](https://github.com/riatelab/geoviz).<br/>Deière mise à jour : <b>${t(n)}</b></small><hr/>`,inputs:["md","formatDateFR","date"],outputs:[],output:void 0,assets:_,autodisplay:!0,autoview:!1,automutable:void 0});h({root:document.getElementById("cell-3"),expanded:[],variables:[]},{id:3,body:(e,t,n,r,i)=>e`<b>Entre le 1er janvier 1993 et ${t(n)}, <ins>${r.format(",.2r")(r.sum(i.map(o=>o.nb))).replace(","," ")} personnes</ins> sont mortes en migration en tentant de rejoindre l'Europe</b>. Noyades, asphyxies, accidents, écrasements, empoisonnements, explosions sur des champs de mines, morts de faim, de soif, d’épuisement, absence de soins médicaux, violences policières, etc. autant de tragédies humaines qui auraient pu être évitées.`,inputs:["md","formatDateFR","date","d3","data"],outputs:[],output:void 0,assets:_,autodisplay:!0,autoview:!1,automutable:void 0});h({root:document.getElementById("cell-8"),expanded:[],variables:[]},{id:8,body:(e,t,n)=>{e(t.table(n))},inputs:["view","Inputs","all"],outputs:[],output:void 0,assets:_,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-9"),expanded:[],variables:[]},{id:9,body:(e,t)=>e`**${t}**`,inputs:["md","missing_categ"],outputs:[],output:void 0,assets:_,autodisplay:!0,autoview:!1,automutable:void 0});h({root:document.getElementById("cell-11"),expanded:[],variables:[]},{id:11,body:(e,t)=>e`Les données incluent des coordonnées géographiques, ce qui permet de créer une première carte où le nombre de morts est représenté par des cercles proportionnel.

⚠️ _Il y a **${t.length} cercles** sur la carte, ce qui peut poser des problèmes de lisibilité. Il y a beaucoup de superpositions. Beaucoup de cercles sont masqués._`,inputs:["md","all"],outputs:[],output:void 0,assets:_,autodisplay:!0,autoview:!1,automutable:void 0});h({root:document.getElementById("cell-12"),expanded:[],variables:[]},{id:12,body:(e,t)=>{e(t({k:100}))},inputs:["display","mapAll"],outputs:[],output:void 0,assets:_,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-15"),expanded:[],variables:[]},{id:15,body:(e,t)=>({distance:e(t.select([10,20,30,40,50,100,200],{label:"Distance",value:50}))}),inputs:["view","Inputs"],outputs:["distance"],output:void 0,assets:_,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-17"),expanded:[],variables:[]},{id:17,body:(e,t)=>({dodge:e(t.toggle({label:"Ecarter les cercles",value:!1}))}),inputs:["view","Inputs"],outputs:["dodge"],output:void 0,assets:_,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-18"),expanded:[],variables:[]},{id:18,body:(e,t,n,r)=>{e(t({distance:n,dodge:r}))},inputs:["display","mapAgregAll","distance","dodge"],outputs:[],output:void 0,assets:_,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-21"),expanded:[],variables:[]},{id:21,body:(e,t)=>{const n=e(t.radio([1,2,3,4,5],{label:"Nombre de cartes par ligne",value:3})),r=e(t.select(Array.from({length:34},(i,o)=>1993+o),{label:"Année de départ",value:2018,format:i=>i.toString()}));return{nb:n,start:r}},inputs:["view","Inputs"],outputs:["nb","start"],output:void 0,assets:_,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-22"),expanded:[],variables:[]},{id:22,body:(e,t,n,r)=>{e(t(n,r))},inputs:["display","smallMultiple","nb","start"],outputs:[],output:void 0,assets:_,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-25"),expanded:[],variables:[]},{id:25,body:(e,t)=>{const n=e(t.select(Array.from({length:34},(o,s)=>1993+s),{label:"Année",value:2025,format:o=>o.toString()})),r=e(t.radio([10,15,20,25,30,35,40,45,50],{label:"Résolution",value:30})),i=e(t.radio(["square","hex","diamond","triangle","arbitrary"],{label:"Type de carroyage",value:"square"}));return{year:n,step:r,type:i}},inputs:["view","Inputs"],outputs:["year","step","type"],output:void 0,assets:_,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-26"),expanded:[],variables:[]},{id:26,body:(e,t,n,r,i)=>{e(t({type:n,step:r,year:i}))},inputs:["display","grid","type","step","year"],outputs:[],output:void 0,assets:_,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-29"),expanded:[],variables:[]},{id:29,body:e=>({svg:e.create({projection:"AzimuthalEqualArea.rotate([-20,-52])",domain:[[-25,19],[42,55]],margin:20,background:"#bde1f0",responsive:!0})}),inputs:["viz"],outputs:["svg"],output:void 0,assets:_,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-30"),expanded:[],variables:[]},{id:30,body:(e,t,n,r,i,o,s,a,l,u,c,d,p,f,v,y)=>{e.graticule({type:"graticule",id:"graticule",stroke:"white"}),e.plot({data:t,id:"countries",fill:"#E6DED4",strokeWidth:.3}),e.plot({datum:n,fill:"#E2BD93",id:"eu27",strokeWidth:.5,filter:e.effect.shadow({stdDeviation:2,fill:"black",fillOpacity:.2,dx:2,dy:2})}),e.plot({type:"proptypo",data:r,var1:"nb",var2:"type",colors:i.map(b=>b.color),k:75,tip:b=>`${b.properties.type}
 ${b.properties.nb} personne${b.properties.nb>1?"s":""}`,stroke:"white",strokeWidth:.2,leg2_rect_width:15,leg2_rect_height:15,leg2_pos:[25,215],leg2_title:"Cause de la mort",leg2_values_stroke:"#bde1f0",leg2_values_strokeWidth:14,leg2_values_dx:8,leg2_values_paintOrder:"stroke",leg2_values_strokeLinejoin:"round",leg1_pos:[20,20],leg1_values_round:0,leg1_title:"Nombre de morts",leg1_subtitle:`Du 1er janvier 1993 au ${o(s)}`,leg1_title_dy:-5}),e.path({datum:a,id:"schengen",stroke:"#383333",strokeDasharray:[5,3],strokeOpacity:.5,strokeWidth:1.4,filter:e.effect.shadow({stdDeviation:1,fill:"black",fillOpacity:.5,dx:1,dy:1})}),e.scalebar({id:"scale",units:"km",label:"Kilomètres"}),e.header({text:"Des morts par milliers aux portes de l'Europe",id:"header",background_fill:"#454545",fill:"white"}),l.forEach(b=>{e.text({id:b.id,pointerEvents:"none",coords:"geo",pos:[b.pos[1],b.pos[0]],text:b.fr,textAnchor:b.anchor,fill:b.fill||"#454545",fillOpacity:b.fillOpacity||1,fontWeight:"bold",strokeWidth:b.strokeWidth,strokeOpacity:b.strokeOpacity||.7,fontSize:b.fontSize,stroke:b.stroke||"white"})}),e.text({pos:[866,15],textAnchor:"middle",fontSize:50,fill:"#454545",fontWeight:"bold",text:`${u.format(",.2r")(u.sum(c.map(b=>b.nb))).replace(","," ")}`,id:"total"}),e.text({pos:[866,65],textAnchor:"middle",fontSize:14,fill:"#454545",stroke:"#E6DED4",strokeWidth:4,text:`C'est le nombre de personnes
migrantes mortes ou portées
disparues en essayant de
rejoindre l'Union européenne
entre ${d} et ${p}.

Dit autrement, ce sont
${f} femmes, hommes
et enfants qui perdent
la vie chaque semaine.`}),e.text({text:v,pos:[e.width-15,450],textAnchor:"end",fontSize:10,fill:"#76858C",fillOpacity:.7,fontStyle:"italic",textDominantBaseline:"hanging",id:"source"}),y(e.render())},inputs:["svg","land","eu","clusters","types","formatDateFR","date","schengen","toponymes","d3","data","yearmin","yearmax","nbbyweek","source","display"],outputs:[],output:void 0,assets:_,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-31"),expanded:[],variables:[]},{id:31,body:(e,t,n,r,i)=>{const o=e.button("Télécharger en svg"),s=e.button("Télécharger en png"),a=document.createElement("div");return a.className="button-container",a.append(o),a.append(s),t(a),o.addEventListener("click",()=>{n.exportSVG(r.select(i.node()))}),s.addEventListener("click",()=>{n.exportPNG(r.select(i.node()))}),{button_svg:o,button_png:s,container:a}},inputs:["Inputs","display","viz","d3","svg"],outputs:["button_svg","button_png","container"],output:void 0,assets:_,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-35"),expanded:[],variables:[]},{id:35,body:e=>e(new URL("data:application/octet-stream;base64,",import.meta.url).href).arrayBuffer(),inputs:["FileAttachment"],outputs:[],output:void 0,assets:_,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-37"),expanded:[],variables:[]},{id:37,body:async()=>{const[{formatDateFR:e},{toGeoJSON:t},{clustering:n},{clustersDbscan:r}]=await Promise.all([m(()=>import("./formatDateFR-CpbNAjJp.js"),[],import.meta.url).then(o=>{if(!("formatDateFR"in o))throw new SyntaxError("export 'formatDateFR' not found");return o}),m(()=>import("./toGeoJSON-snGM7fOw.js"),[],import.meta.url).then(o=>{if(!("toGeoJSON"in o))throw new SyntaxError("export 'toGeoJSON' not found");return o}),m(()=>import("./clustering-CqVClbcb.js"),__vite__mapDeps([2,3,4]),import.meta.url).then(o=>{if(!("clustering"in o))throw new SyntaxError("export 'clustering' not found");return o}),m(()=>import("./index-B2OyUy_M.js"),[],import.meta.url).then(o=>{if(!("clustersDbscan"in o))throw new SyntaxError("export 'clustersDbscan' not found");return o})]),i=m(()=>import("./index-BCgWHfrs.js"),__vite__mapDeps([5,4]),import.meta.url);return{formatDateFR:e,toGeoJSON:t,clustering:n,clustersDbscan:r,viz:i}},inputs:[],outputs:["formatDateFR","toGeoJSON","clustering","clustersDbscan","viz"],output:void 0,assets:_,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-38"),expanded:[],variables:[]},{id:38,body:()=>({yearmin:1993,yearmax:new Date().getFullYear(),lang:"fr"}),inputs:[],outputs:["yearmin","yearmax","lang"],output:void 0,assets:_,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-39"),expanded:[],variables:[]},{id:39,body:async e=>{let t=await e(new URL(""+new URL("data-C5vF2xoZ.csv",import.meta.url).href,import.meta.url).href).csv(),n=await e(new URL("data:text/csv;base64,IngiCiJmYWxsIgoicnVuIG92ZXIgYnkgYSB0cnVjayIKInJ1biBvdmVyIgoicnVuIG92ZXIgYnkgYSB0cmFpbiIKImNydXNoZWQiCiJibGVkIHRvIGRlYXRoIGR1ZSB0byBiYXJiZWQgd2lyZSIKImRpZWQgYmVjYXVzZSBvZiBkYW5nZXJvdXMgdW5kZWNsYXJlZCB3b3JrIgoicnVuIG92ZXIgYnkgYSBidXMiCiJydW4gb3ZlciBieSBhIGNhciIKImRpZWQgb2YgYSBzaG9jayIKImRpZWQgYWZ0ZXIgYSBmaWdodCIKImF0dGFja2VkIGJ5IGFuaW1hbHMiCiJlbGVjdHJvY3V0ZWQiCiJWZWhpY2xlIGFjY2lkZW50IC8gZGVhdGggbGlua2VkIHRvIGhhemFyZG91cyB0cmFuc3BvcnQiCg==",import.meta.url).href).csv(),r=await e(new URL(""+new URL("land-Dvzn_kmh.json",import.meta.url).href,import.meta.url).href).json(),i=await e(new URL(""+new URL("eu-Dm0wIMj8.json",import.meta.url).href,import.meta.url).href).json(),o=await e(new URL(""+new URL("schengen-gDsR65kv.json",import.meta.url).href,import.meta.url).href).json(),s=await e(new URL(""+new URL("toponymes-CVFmXlu4.json",import.meta.url).href,import.meta.url).href).json(),a=e(new URL("data:text/plain;base64,MjAyNi0wMi0xMwo=",import.meta.url).href).text();return{all:t,missing:n,land:r,eu:i,schengen:o,toponymes:s,date:a}},inputs:["FileAttachment"],outputs:["all","missing","land","eu","schengen","toponymes","date"],output:void 0,assets:_,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-40"),expanded:[],variables:[]},{id:40,body:e=>({missing_categ:e.length==0?"":`⚠️ Catégories non affectées : ${e.map(n=>`"${n.x}"`).join(", ")} => NA. Modifier le programme R.`}),inputs:["missing"],outputs:["missing_categ"],output:void 0,assets:_,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-41"),expanded:[],variables:[]},{id:41,body:()=>({types:[{type:"Noyade",color:"#58ABD3"},{type:"Suicide",color:"#F8E91F"},{type:"Asphyxie",color:"#6B2265"},{type:"Mort de faim, de soif, de froid ou d'épuisement",color:"#1C7532"},{type:"Homicide, torture, absence de soin, violences policières",color:"#F49919"},{type:"Empoisonnement, Champ de mine, accident, autre",color:"#637A84"}]}),inputs:[],outputs:["types"],output:void 0,assets:_,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-42"),expanded:[],variables:[]},{id:42,body:(e,t,n)=>({check:new Map(e.tool.project(e.tool.featurecollection(t,{lat:"lat",lon:"lng"}),{projection:n.projection}).features.map(i=>[i.properties.id,i.geometry?.coordinates]))}),inputs:["viz","all","svg"],outputs:["check"],output:void 0,assets:_,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-43"),expanded:[],variables:[]},{id:43,body:(e,t)=>({data:e.filter(r=>Array.isArray(t.get(r.id)))}),inputs:["all","check"],outputs:["data"],output:void 0,assets:_,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-44"),expanded:[],variables:[]},{id:44,body:(e,t,n,r)=>{let i=e.map(a=>a.type),o=[];i.forEach(a=>{let l=t.filter(u=>u.fr==a);o.push(n(r(l),20,a).features)});let s={type:"FeatureCollection",features:o.flat()};return{categories:i,features:o,clusters:s}},inputs:["types","data","clustering","toGeoJSON"],outputs:["categories","features","clusters"],output:void 0,assets:_,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-45"),expanded:[],variables:[]},{id:45,body:(e,t,n)=>{let r=`UNITED for Intercultural
Action (1993-1999)`,i=`The "Migrants Files" project
(2000 - 2013)`,o=e=="en"?`International Organization
for Migration
(2014 to now)`:`Organisation Internationale
pour les Migrations
(2014 à aujourd'hui)`,s=e=="en"?`Map design
Nicolas Lambert, 2026`:`Cartographie
Nicolas Lambert, 2026
`;return t<2e3&&(s+=`
`+r),t<=2013&&n>=2e3&&(s+=`
`+i),n>=2014&&(s+=`
`+o),{source1:r,source2:i,source3:o,source:s}},inputs:["lang","yearmin","yearmax"],outputs:["source1","source2","source3","source"],output:void 0,assets:_,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-46"),expanded:[],variables:[]},{id:46,body:(e,t,n,r)=>{let i=new Date(e),o=i.getTime()-new Date(`${t}-01-01`).getTime();const s=Math.round(o/(1e3*3600*24)),a=s/7,l=Math.round(n.sum(r.map(u=>u.nb))/a);return{update:i,Difference_In_Time:o,days:s,weeks:a,nbbyweek:l}},inputs:["date","yearmin","d3","data"],outputs:["update","Difference_In_Time","days","weeks","nbbyweek"],output:void 0,assets:_,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-47"),expanded:[],variables:[]},{id:47,body:(e,t,n,r,i,o)=>{function s({year:a=2020,distance:l=300,parent:u,width:c=1e3,pos:d=[0,0],k:p=70}={}){const f=e(t.tool.featurecollection(n.filter(y=>y.year==a),{lat:"lat",lon:"lng"}),l);let v=t.create({parent:u,projection:r.geoAzimuthalEqualArea().rotate([-20,-52]),width:c,pos:d,domain:[[-25,19],[42,55]]});return v.plot({type:"outline"}),v.plot({datum:i,fill:"white"}),v.plot({data:o,stroke:"#383333",strokeDasharray:[5,3],strokeOpacity:.5,strokeWidth:1,filter:v.effect.shadow({stdDeviation:1,fill:"black",fillOpacity:.5,dx:1,dy:1})}),v.plot({type:"prop",data:f,var:"nb",k:p,fixmax:1e3,fill:"#E94849",fillOpacity:.8,tip:"$nb",legend:!1}),v.plot({type:"text",pos:[10,10],text:`${a}`,fontSize:30,fontWeight:"bold",fill:"white"}),v.plot({type:"text",pos:[10,40],text:`${r.sum(f.features.map(y=>y.properties.nb))} mort.e.s`,fontSize:12,fontWeight:"bold",fill:"#474746"}),v.render()}return{mapByYear:s}},inputs:["clustering","viz","data","d3","land","schengen"],outputs:["mapByYear"],output:void 0,assets:_,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-48"),expanded:[],variables:[]},{id:48,body:(e,t,n)=>{function r(i=3,o=1993){const s=[...new Set(e.map(d=>+d.year))].sort().filter(d=>d>=o),a=1e3,l=a/i,u=l/1.46;let c=t.create({responsive:!0,width:a,height:Math.ceil(s.length/i)*u});return s.forEach((d,p)=>{const f=Math.floor(p/i),y=p%i*l,b=f*u;n({year:d,parent:c,width:l,k:20,pos:[y,b]})}),c.render()}return{smallMultiple:r}},inputs:["data","viz","mapByYear"],outputs:["smallMultiple"],output:void 0,assets:_,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-49"),expanded:[],variables:[]},{id:49,body:(e,t,n,r,i,o)=>{function s({k:a=50}={}){let l=e.create({projection:t.geoAzimuthalEqualArea().rotate([-20,-52]),width:n,responsive:!0,domain:[[-25,19],[42,55]]});return l.plot({type:"outline"}),l.plot({datum:r,fill:"white"}),l.plot({data:i,stroke:"#383333",strokeDasharray:[5,3],strokeOpacity:.5,strokeWidth:1,filter:l.effect.shadow({stdDeviation:1,fill:"black",fillOpacity:.5,dx:1,dy:1})}),l.plot({type:"prop",data:o,var:"nb",k:a,fill:"#E94849",fillOpacity:.8,tip:"$nb",leg_title:`Personnes mortes
ou portées disparues
de 1993 à aujourd'hui`,leg_subtitle:"(Nombre de personnes)",leg_values_round:0}),l.render()}return{mapAll:s}},inputs:["viz","d3","width","land","schengen","clusters"],outputs:["mapAll"],output:void 0,assets:_,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-50"),expanded:[],variables:[]},{id:50,body:(e,t,n,r,i,o)=>{function s({distance:a=50,width:l=1e3,k:u=100,fixmax:c=3e4,dodge:d=!1}={}){const p=e(t.tool.featurecollection(n,{lat:"lat",lon:"lng"}),a);let f=t.create({projection:r.geoAzimuthalEqualArea().rotate([-20,-52]),width:l,responsive:!0,domain:[[-25,19],[42,55]]});return f.plot({type:"outline"}),f.plot({datum:i,fill:"white"}),f.plot({data:o,stroke:"#383333",strokeDasharray:[5,3],strokeOpacity:.5,strokeWidth:1,filter:f.effect.shadow({stdDeviation:1,fill:"black",fillOpacity:.5,dx:1,dy:1})}),f.plot({type:"prop",data:p,var:"nb",k:u,fixmax:c,dodge:d,fill:"#E94849",fillOpacity:.8,tip:"$nb",leg_title:`Personnes mortes
ou portées disparues
de 1993 à aujourd'hui`,leg_subtitle:"(Nombre de personnes)",leg_values_round:0}),f.render()}return{mapAgregAll:s}},inputs:["clustering","viz","data","d3","land","schengen"],outputs:["mapAgregAll"],output:void 0,assets:_,autodisplay:!1,autoview:void 0,automutable:void 0});h({root:document.getElementById("cell-51"),expanded:[],variables:[]},{id:51,body:(e,t,n,r,i,o)=>{function s({type:a="square",step:l=10,year:u="2025"}={}){let c=e.create({projection:t.geoAzimuthalEqualArea().rotate([-20,-52]),width:n,responsive:!0,domain:[[-25,19],[42,55]]}),d=c.grid({type:a,step:l,data:e.tool.featurecollection(r.filter(y=>y.year==u),{lat:"lat",lon:"lng"}),var:"nb"});const p=t.max(d.features.map(y=>y.properties.nb)),f=[1,5,10,25,50,100,500,1e3,p].filter(y=>y<=p),v=["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"].slice(0,f.length-1);return c.plot({type:"outline"}),c.plot({datum:i,fill:"white"}),c.plot({type:"choro",coords:"svg",colors:v,data:d,var:"nb",tip:"$nb",fillOpacity:.8,breaks:f,leg_title:`Nombre de personnes
mortes ou portées
disparues en ${u}`}),c.plot({data:o,stroke:"#383333",strokeDasharray:[5,3],strokeOpacity:.5,strokeWidth:1,filter:c.effect.shadow({stdDeviation:1,fill:"black",fillOpacity:.5,dx:1,dy:1})}),c.render()}return{grid:s}},inputs:["viz","d3","width","all","land","schengen"],outputs:["grid"],output:void 0,assets:_,autodisplay:!1,autoview:void 0,automutable:void 0});export{m as _};
